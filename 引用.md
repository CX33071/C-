引用

本质：变量的别名、外号，和变量共享同一块内存，地址一样，修改引用就是修改变量**类型&引用名=原变量名**（&引用声明符）

注意点：

1. **必须初始化**：声明引用时，必须绑定一个已存在的变量`int&a1=a;`
2. **不能重新绑定**
3. **不占额外内存**
4. **类型严格匹配**：必须和绑定的变量类型完全一致（`const` 引用除外）

用途：

1.函数传参(代替C语言中的指针),直接传变量名，C必须穿地址

```c
void swapByRef(int& x, int& y) {  // x 是实参 a 的别名，y 是实参 b 的别名
    int temp = x;
    x = y;
    y = temp;  // 直接操作别名 = 修改实参
}

// C 语言指针版（对比）
void swapByPtr(int* x, int* y) {
    int temp = *x;
    *x = *y;
    *y = temp;  // 必须解引用，调用时要传地址
}
```

如果参数是 `string`、自定义类等大对象，要求不能修改原值，用C传值会拷贝整个对象（耗时耗内存），传`const`引用直接操作原对象（无拷贝开销）：

```c
#include <iostream>
#include <string>
using namespace std;

// const 引用：保护实参不被修改，同时避免拷贝
void printString(const string& s) {  // 用 const 引用，实参不能被修改
    cout << s << endl;
}

int main() {
    string longStr = "这是一个很长很长的字符串...";
    printString(longStr);  // 传引用：无拷贝，效率高
    return 0;
}
```

2.函数返回引用

C语言函数返回变量时会创建临时拷贝，C++返回引用，直接返回原变量的别名，适合大对象返回

返回数组元素的引用，可直接修改数组

```c
#include <iostream>
using namespace std;

// 返回数组第 i 个元素的引用（返回类型是 int&）
int& getArrayElem(int arr[], int i) {
    return arr[i];  // arr[i] 是数组元素，函数结束后仍存在（数组在主函数栈上）
}

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    
    // 直接通过返回的引用修改数组元素
    getArrayElem(arr, 2) = 100;  // 等价于 arr[2] = 100
    
    cout << "arr[2] = " << arr[2] << endl;  // 输出 100
    
    return 0;
}

```

错误：不能返回局部变量的引用

```c
int& badFunc() {
    int x = 10;  // 局部变量，函数结束后销毁
    return x;    // 错误：返回局部变量的引用
}

int main() {
    int& r = badFunc();
    cout << r << endl;  // 未定义行为（可能输出随机值或崩溃）
    return 0;
}

```

3.`const`引用

只读别名，用`const`修饰的引用称为常引用

特点：不能修改原变量，但原变量自己可以修改并且引用实时更新

​	   支持绑定不同类型的变量，如`double绑定到const int&`

```c
#include <iostream>
using namespace std;

int main() {
    int a = 10;
    const int& r_a = a;  // 常引用：只读
    
    // r_a = 20;  // 错误：const 引用不能修改原变量
    a = 20;  // 允许：原变量可以自己修改
    cout << "r_a = " << r_a << endl;  // 输出 20（同步原变量）
    
    // 特性 1：绑定不同类型的变量（非 const 引用不允许）
    double b = 3.14;
    const int& r_b = b;  // 合法：编译器创建临时变量（double→int）
    cout << "r_b = " << r_b << endl;  // 输出 3（截断）
    
    // 特性 2：绑定临时变量（延长临时变量生命周期）
    const int& r_c = 100;  // 合法：临时变量 100 会一直存在到 r_c 销毁
    cout << "r_c = " << r_c << endl;  // 输出 100
    
    return 0;
}

```

作用：

1. 函数传参时保护实参（如 `print(const string& s)`，确保 s 不被修改）；
2. 接收不同类型的参数（如函数参数用 `const int&`，可接收 int、double 等）；
3. 延长临时变量的生命周期（避免临时变量销毁后引用悬空）。

4.什么时候用引用？什么时候用指针？

优先用引用：函数传参（修改实参或避免拷贝）、函数返回大对象（非局部变量）；

必须用指针：需要重新指向其他变量、需要表示 “空”（NULL）、实现链表 / 树等数据结构（指针跳转）
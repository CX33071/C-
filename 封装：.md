封装：

本质：用private隐藏属性，用pulic提供接口并做校验

意义：(1)将属性和行为作为一个整体，表现生活中的事物，对属性和行为加以权限控制

​	   (2)把属性和行为放在不同的权限下

提供 3 个关键字控制类成员的访问权限，作用域从当前控制符开始，到下一个控制符或类结束：

| 访问控制符          | 访问权限（谁能访问）           | 核心用途                           |
| ------------------- | ------------------------------ | ---------------------------------- |
| `public`公共权限    | 均可访问                       | 暴露对外接口（如方法、构造函数）   |
| `private`保护权限   | 仅类内部可访问                 | 隐藏核心属性、内部辅助方法         |
| `protected`私有权限 | 类内部、子类可访问（外部不可） | 子类需要复用的内部逻辑（继承场景） |

> 注意：如果未显式指定访问控制符，`class` 默认成员为 `private`（`struct` 默认 `public`，这是 `class` 和 `struct` 的核心区别之一）。
>
> ```c
> class C1
> {
> 	int  m_A; //默认是私有权限
> };
> 
> struct C2
> {
> 	int m_A;  //默认是公共权限
> };
> 
> int main() {
> 
> 	C1 c1;
> 	c1.m_A = 10; //错误，访问权限是私有
> 
> 	C2 c2;
> 	c2.m_A = 10; //正确，访问权限是公共
> 
> 	system("pause");
> 
> 	return 0;
> }
> ```
>
> 

作用：数据保护（`p.age=-1`错误，age为私有不能直接访问、隐藏内部逻辑、通过接口校验`setage()`加入校验逻辑）

```c
#include <iostream>
#include <string>
#include <stdexcept>  // 用于抛出异常（非法参数）
using namespace std;

class Person {
public:
    // 1. 公有构造函数（对外接口：创建对象时初始化）
    Person(string name, int age) {
        // 构造时通过 setter 初始化，复用校验逻辑（避免重复代码）
        setName(name);
        setAge(age);
        cout << "Person 构造函数调用：" << getName() << endl;
    }

    // 2. 公有接口（getter：获取属性值，仅读）
    string getName() const {  // const 修饰：保证方法不修改对象属性
        return this->name;
    }

    int getAge() const {
        return this->age;
    }

    // 3. 公有接口（setter：修改属性值，写入时校验）
    void setName(string name) {
        // 逻辑校验：姓名不能为空
        if (name.empty()) {
            throw invalid_argument("姓名不能为空！");  // 抛出异常，拒绝非法值
        }
        this->name = name;
    }

    void setAge(int age) {
        // 逻辑校验：年龄必须在合理范围（0-120）
        if (age < 0 || age > 120) {
            throw invalid_argument("年龄必须在 0-120 之间！");
        }
        this->age = age;
    }

    // 4. 公有业务接口（对外暴露的功能）
    void showInfo() const {
        cout << "姓名：" << getName() << ", 年龄：" << getAge() << endl;
    }

private:
    // 5. 私有属性（隐藏细节：外部不能直接访问）
    string name;  // 姓名（核心数据，禁止直接修改）
    int age;      // 年龄（核心数据，需校验合法性）
};

int main() {
    try {
        // 创建对象（通过构造函数接口初始化，触发校验）
        Person p("张三", 20);
        p.showInfo();  // 输出：姓名：张三, 年龄：20

        // 正确用法：通过公有接口修改属性（触发校验）
        p.setAge(25);  // 年龄合法，修改成功
        p.setName("张三三");  // 姓名合法，修改成功
        p.showInfo();  // 输出：姓名：张三三, 年龄：25

        // 非法操作 1：直接访问私有属性（编译报错！）
        // p.name = "李四";  // 错误：name 是 private，外部不可访问
        // p.age = -5;       // 错误：age 是 private，外部不可访问

        // 非法操作 2：通过接口传入非法值（触发异常）
        // p.setAge(150);  // 抛出异常：年龄超出范围
        // p.setName("");   // 抛出异常：姓名为空
    }
    catch (const invalid_argument& e) {
        cout << "错误：" << e.what() << endl;
    }

    return 0;
}

```

```c
//圆周率
const double PI = 3.14;

//1、封装的意义
//将属性和行为作为一个整体，用来表现生活中的事物

//封装一个圆类，求圆的周长
//class代表设计一个类，后面跟着的是类名
class Circle
{
public:  //访问权限  公共的权限

	//属性
	int m_r;//半径

	//行为
	//获取到圆的周长
	double calculateZC()
	{
		//2 * pi  * r
		//获取圆的周长
		return  2 * PI * m_r;
	}
};

int main() {

	//通过圆类，创建圆的对象
	// c1就是一个具体的圆
	Circle c1;
	c1.m_r = 10; //给圆对象的半径 进行赋值操作

	//2 * pi * 10 = = 62.8
	cout << "圆的周长为： " << c1.calculateZC() << endl;

	system("pause");

	return 0;
}
```

```c
//学生类
class Student {
public:
	void setName(string name) {
		m_name = name;
	}
	void setID(int id) {
		m_id = id;
	}

	void showStudent() {
		cout << "name:" << m_name << " ID:" << m_id << endl;
	}
public:
	string m_name;
	int m_id;
};

int main() {

	Student stu;
	stu.setName("德玛西亚");
	stu.setID(250);
	stu.showStudent();

	system("pause");

	return 0;
}

```

```c
//三种权限
//公共权限  public     类内可以访问  类外可以访问
//保护权限  protected  类内可以访问  类外不可以访问
//私有权限  private    类内可以访问  类外不可以访问

class Person
{
	//姓名  公共权限
public:
	string m_Name;

	//汽车  保护权限
protected:
	string m_Car;

	//银行卡密码  私有权限
private:
	int m_Password;

public:
	void func()
	{
		m_Name = "张三";
		m_Car = "拖拉机";
		m_Password = 123456;
	}
};

int main() {

	Person p;
	p.m_Name = "李四";
	//p.m_Car = "奔驰";  //保护权限类外访问不到
	//p.m_Password = 123; //私有权限类外访问不到

	system("pause");

	return 0;
}
```

将所有成员属性设置为私有，可以自己控制读写权限，通过自己写`public`函数提供接口来实现，比如姓名可读可写，是因为类同时提供了修改接口`setname`和获取接口`getname`,情人只写是因为只提供修改接口没提供获取接口

```c++
class Person {
public:

	//姓名设置可读可写
	void setName(string name) {
		m_Name = name;
	}
	string getName()
	{
		return m_Name;
	}


	//获取年龄 
	int getAge() {
		return m_Age;
	}
	//设置年龄
	void setAge(int age) {
		if (age < 0 || age > 150) {
			cout << "你个老妖精!" << endl;
			return;
		}
		m_Age = age;
	}

	//情人设置为只写
	void setLover(string lover) {
		m_Lover = lover;
	}

private:
	string m_Name; //可读可写  姓名
	
	int m_Age; //只读  年龄

	string m_Lover; //只写  情人
};


int main() {

	Person p;
	//姓名设置
	p.setName("张三");
	cout << "姓名： " << p.getName() << endl;

	//年龄设置
	p.setAge(50);
	cout << "年龄： " << p.getAge() << endl;

	//情人设置
	p.setLover("苍井");
	//cout << "情人： " << p.m_Lover << endl;  //只写属性，不可以读取

	system("pause");

	return 0;
}
```

